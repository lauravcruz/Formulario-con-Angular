<form #formulario="ngForm" (ngSubmit)="agregar(formulario)">
  <mat-card-title>Formulario</mat-card-title>
  <div layout="ng-scope layout-row" class="layout">
    <div flex>
      <mat-form-field appearance="fill">
        <mat-label>Nombre</mat-label>
        <input type="text" matInput class="form-control" name="nombre" [(ngModel)]="persona.nombre" #nombre="ngModel"
          placeholder="Nombre" minlength="3" required>

        <div class="error" *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)">
          <div *ngIf="nombre.errors?.['required']">Nombre obligarorio</div>
          <div *ngIf="nombre.errors?.['minlength']">Nombre inválido. Mínimo 3 caracteres</div>
        </div>

      </mat-form-field>

    </div>

    <div flex>
      <mat-form-field appearance="fill">
        <mat-label>Apellidos</mat-label>
        <input type="text" matInput class="form-control" name="apellidos" [(ngModel)]="persona.apellidos"
          #apellidos="ngModel" placeholder="Apellidos" minlength="3" required>

        <div class="error" *ngIf="apellidos.invalid && (apellidos.dirty || apellidos.touched)">
          <div *ngIf="apellidos.errors?.['required']">Nombre obligarorio</div>
          <div *ngIf="apellidos.errors?.['minlength']">Apellido inválido. Mínimo 3 caracteres</div>
        </div>
      </mat-form-field>
    </div>

    <div flex>
      <mat-form-field appearance="fill">
        <mat-label>Edad</mat-label>
        <input type="number" matInput class="form-control" name="edad" [(ngModel)]="persona.edad" #edad="ngModel"
          placeholder="Edad" min="0" max="125" required>

        <div class="error" *ngIf="edad.invalid && (edad.dirty || edad.touched)">
          <div *ngIf="edad.errors?.['required']">Edad obligaroria</div>
          <div *ngIf="edad.errors?.['max']">Edad inválida. No debe superar los 125</div>
          <div *ngIf="edad.errors?.['min']">Edad inválida. Debe ser mayor o igual que 0</div>
        </div>
      </mat-form-field>
    </div>

    <div flex>
      <mat-form-field appearance="fill">
        <mat-label>DNI</mat-label>
        <input type="text" matInput class="form-control" name="DNI" [(ngModel)]="persona.DNI" #DNI="ngModel"
          placeholder="DNI" pattern="[0-9]{8}[A-Za-z]{1}" required>

        <div class="error" *ngIf="DNI.invalid && (DNI.dirty || DNI.touched)">
          <div *ngIf="DNI.errors?.['required']">DNI obligarorio</div>
          <div *ngIf="DNI.errors?.['pattern']">Debe componerse de 8 números y una letra</div>
        </div>

      </mat-form-field>
    </div>

    <div flex>
      <mat-label>Sexo: </mat-label><br>
      <mat-radio-group name="sexo" #sexo="ngModel" [(ngModel)]="persona.sexo" required>
        <mat-radio-button value="Hombre">Hombre</mat-radio-button><br>
        <mat-radio-button value="Mujer">Mujer</mat-radio-button><br>
        <mat-radio-button value="Otro">Otro</mat-radio-button><br>
        <mat-radio-button value="No especificado">No Especificado</mat-radio-button>
      </mat-radio-group>

      <div class="error" *ngIf="(!sexo.touched)">
        <div *ngIf="sexo.errors?.['required']">Marque su sexo</div>
      </div>

    </div>

    <div flex>
      <mat-form-field appearance="fill">
        <mat-label>Color favorito</mat-label>
        <input type="text" matInput class="form-control" name="colorFavorito" [(ngModel)]="persona.colorFavorito"
          #colorFavorito="ngModel" placeholder="Color Favorito" minlength="3" required>

        <div class="error" *ngIf="colorFavorito.invalid && (colorFavorito.dirty || colorFavorito.touched)">
          <div *ngIf="colorFavorito.errors?.['required']">Color obligarorio</div>
          <div *ngIf="colorFavorito.errors?.['pattern']">Color inválido. Mínimo 3 caracteres</div>
        </div>
      </mat-form-field>
    </div>

    <div flex>
      <mat-form-field>
        <mat-label>Cumpleaños</mat-label>
        <input matInput [matDatepicker]="picker" class="form-control" name="cumple" [(ngModel)]="persona.cumple"
          #cumple="ngModel" placeholder="Fecha Cumpleaños" required>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>

        <div class="error" *ngIf="cumple.invalid && (cumple.dirty || cumple.touched)">
          <div *ngIf="cumple.errors?.['required']">Cumpleaños obligarorio</div>
        </div>

      </mat-form-field>
    </div>
    <div class="botones">
      <button class="add" mat-raised-button color="primary" type="submit" [disabled]="!formulario.valid">Añadir
        persona</button>
    </div>
  </div>
</form>

<mat-card class="lista">
  <mat-card-title>Personas añadidas: </mat-card-title>
  <mat-list>

    <mat-grid-list cols="3" rows="3" rowHeight="50px">
      <mat-list-item *ngFor="let persona of listadoPersona; let i = index">
        <mat-grid-tile>
          <p><span class="encabezado">Nombre y apellidos: </span><br>{{persona.nombre}} {{persona.apellidos}}</p>
        </mat-grid-tile>
        <mat-grid-tile>
          <p>
            <p><span class="encabezado">DNI: </span><br>{{persona.DNI }}</p>
        </mat-grid-tile>
        <mat-grid-tile>
          <p>
            <p><span class="encabezado">Edad: </span><br>{{persona.edad }} años</p>
        </mat-grid-tile>
        <mat-grid-tile>
          <p>
            <p><span class="encabezado">Cumpleaños: </span><br>{{persona.cumple | date: 'dd/MM/yyyy'}}</p>
        </mat-grid-tile>
        <mat-grid-tile>
          <p>
            <p><span class="encabezado">Color Favorito: </span><br>{{persona.colorFavorito}}</p>
        </mat-grid-tile>
        <mat-grid-tile>
          <p>
            <p><span class="encabezado">Sexo: </span><br>{{persona.sexo}}</p>
        </mat-grid-tile>
        <mat-grid-tile colspan="2"></mat-grid-tile>

        <mat-grid-tile colspan="1">
          <button class="button" mat-raised-button color="primary" (click)="modificar(i)">Modificar</button>&nbsp;
          <button class="button" mat-raised-button color="warn" (click)="borrar(i)">Borrar</button>
        </mat-grid-tile>
      </mat-list-item>
    </mat-grid-list>
  </mat-list>

</mat-card>
